<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API - APISafe</title>
    <meta name="description" content="Справочник REST API APISafe - полная документация по эндпоинтам, параметрам и примерам использования">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="page-styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <div class="nav-brand">
                <div class="logo">
                    <a href="index.html">
                        <i data-lucide="shield-check"></i>
                        <span>ApiSafe</span>
                    </a>
                </div>
            </div>
            <div class="nav-menu">
                <a href="index.html#features" class="nav-link">Возможности</a>
                <a href="index.html#pricing" class="nav-link">Цены</a>
                <a href="faq.html" class="nav-link">FAQ</a>
                <a href="contacts.html" class="nav-link">Контакты</a>
            </div>
            <div class="nav-actions">
                <button class="btn btn-primary" onclick="scrollToForm()">Попробовать бесплатно</button>
            </div>
            <button class="mobile-menu-toggle" aria-label="Открыть меню">
                <i data-lucide="menu"></i>
            </button>
        </nav>
    </header>

    <!-- Page Content -->
    <main class="page-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">API Справочник</h1>
                <p class="page-subtitle">Полная документация REST API APISafe для интеграции с вашими приложениями</p>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <div class="breadcrumbs">
                    <a href="index.html">Главная</a>
                    <i data-lucide="chevron-right"></i>
                    <span>API</span>
                </div>

                <h2>Введение</h2>
                
                <p>APISafe предоставляет RESTful API для программного доступа к вашим секретам и управления ими. API использует JSON для обмена данными и стандартные HTTP коды ответов.</p>

                <div class="info-box">
                    <h4><i data-lucide="globe"></i> Базовый URL</h4>
                    <p><code class="code-inline">https://api.apisafe.io/v1</code></p>
                </div>

                <h2>Аутентификация</h2>
                
                <p>Все запросы к API должны содержать заголовок авторизации с вашим API токеном:</p>
                
                <div class="code-block">
Authorization: Bearer YOUR_API_TOKEN
                </div>

                <h3>Получение API токена</h3>
                <ol>
                    <li>Войдите в панель управления APISafe</li>
                    <li>Перейдите в раздел "Настройки" → "API токены"</li>
                    <li>Нажмите "Создать новый токен"</li>
                    <li>Задайте название и права доступа</li>
                    <li>Скопируйте токен (он показывается только один раз)</li>
                </ol>

                <div class="info-box warning">
                    <h4><i data-lucide="alert-triangle"></i> Безопасность токенов</h4>
                    <p>Храните API токены в безопасном месте. Не передавайте их в URL параметрах или логах. Регулярно ротируйте токены.</p>
                </div>

                <h2>Лимиты запросов</h2>
                
                <table class="content-table">
                    <thead>
                        <tr>
                            <th>План</th>
                            <th>Запросов в минуту</th>
                            <th>Запросов в день</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Free</td>
                            <td>60</td>
                            <td>1,000</td>
                        </tr>
                        <tr>
                            <td>Starter</td>
                            <td>300</td>
                            <td>10,000</td>
                        </tr>
                        <tr>
                            <td>Professional</td>
                            <td>1,000</td>
                            <td>100,000</td>
                        </tr>
                        <tr>
                            <td>Enterprise</td>
                            <td>Без ограничений</td>
                            <td>Без ограничений</td>
                        </tr>
                    </tbody>
                </table>

                <h2>Коды ответов</h2>
                
                <table class="content-table">
                    <thead>
                        <tr>
                            <th>Код</th>
                            <th>Описание</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>200</code></td>
                            <td>Успешный запрос</td>
                        </tr>
                        <tr>
                            <td><code>201</code></td>
                            <td>Ресурс создан</td>
                        </tr>
                        <tr>
                            <td><code>400</code></td>
                            <td>Неверный запрос</td>
                        </tr>
                        <tr>
                            <td><code>401</code></td>
                            <td>Не авторизован</td>
                        </tr>
                        <tr>
                            <td><code>403</code></td>
                            <td>Доступ запрещен</td>
                        </tr>
                        <tr>
                            <td><code>404</code></td>
                            <td>Ресурс не найден</td>
                        </tr>
                        <tr>
                            <td><code>429</code></td>
                            <td>Превышен лимит запросов</td>
                        </tr>
                        <tr>
                            <td><code>500</code></td>
                            <td>Внутренняя ошибка сервера</td>
                        </tr>
                    </tbody>
                </table>

                <h2>Секреты</h2>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">GET</span>
                        <span>/secrets</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Получить список всех секретов</p>
                        
                        <div class="api-params">
                            <h4>Query параметры:</h4>
                            <div class="api-param">
                                <div class="api-param-name">
                                    project_id
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Фильтр по ID проекта (опционально)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    type
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Фильтр по типу секрета (опционально)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    limit
                                    <span class="api-param-type">integer</span>
                                </div>
                                <p>Количество результатов (по умолчанию: 50, максимум: 100)</p>
                            </div>
                        </div>

                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X GET "https://api.apisafe.io/v1/secrets?project_id=proj_abc123&limit=10" \
  -H "Authorization: Bearer YOUR_API_TOKEN"
                        </div>

                        <h4>Пример ответа:</h4>
                        <div class="code-block">
{
  "data": [
    {
      "id": "secret_abc123",
      "name": "OpenAI Main Key",
      "type": "openai",
      "project_id": "proj_abc123",
      "description": "Основной ключ для OpenAI API",
      "tags": ["production", "ai"],
      "created_at": "2025-01-15T10:30:00Z",
      "updated_at": "2025-01-15T10:30:00Z",
      "last_used_at": "2025-01-18T14:22:00Z"
    }
  ],
  "pagination": {
    "total": 25,
    "page": 1,
    "per_page": 10,
    "pages": 3
  }
}
                        </div>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">GET</span>
                        <span>/secrets/{secret_id}</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Получить конкретный секрет по ID</p>
                        
                        <div class="api-params">
                            <h4>Path параметры:</h4>
                            <div class="api-param">
                                <div class="api-param-name">
                                    secret_id
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Уникальный идентификатор секрета</p>
                            </div>
                        </div>

                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X GET "https://api.apisafe.io/v1/secrets/secret_abc123" \
  -H "Authorization: Bearer YOUR_API_TOKEN"
                        </div>

                        <h4>Пример ответа:</h4>
                        <div class="code-block">
{
  "id": "secret_abc123",
  "name": "OpenAI Main Key",
  "type": "openai",
  "value": "sk-proj-...",
  "project_id": "proj_abc123",
  "description": "Основной ключ для OpenAI API",
  "tags": ["production", "ai"],
  "created_at": "2025-01-15T10:30:00Z",
  "updated_at": "2025-01-15T10:30:00Z",
  "last_used_at": "2025-01-18T14:22:00Z"
}
                        </div>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">POST</span>
                        <span>/secrets</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Создать новый секрет</p>
                        
                        <div class="api-params">
                            <h4>Body параметры:</h4>
                            <div class="api-param">
                                <div class="api-param-name">
                                    name
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Название секрета (обязательно)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    value
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Значение секрета (обязательно)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    type
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Тип секрета (опционально)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    project_id
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>ID проекта (опционально)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    description
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Описание секрета (опционально)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    tags
                                    <span class="api-param-type">array</span>
                                </div>
                                <p>Массив тегов (опционально)</p>
                            </div>
                        </div>

                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X POST "https://api.apisafe.io/v1/secrets" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Telegram Bot Token",
    "value": "1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",
    "type": "telegram",
    "project_id": "proj_abc123",
    "description": "Токен для основного бота",
    "tags": ["bot", "production"]
  }'
                        </div>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">PUT</span>
                        <span>/secrets/{secret_id}</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Обновить существующий секрет</p>
                        
                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X PUT "https://api.apisafe.io/v1/secrets/secret_abc123" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "OpenAI Updated Key",
    "description": "Обновленный ключ OpenAI",
    "tags": ["production", "ai", "updated"]
  }'
                        </div>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">DELETE</span>
                        <span>/secrets/{secret_id}</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Удалить секрет</p>
                        
                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X DELETE "https://api.apisafe.io/v1/secrets/secret_abc123" \
  -H "Authorization: Bearer YOUR_API_TOKEN"
                        </div>
                    </div>
                </div>

                <h2>Проекты</h2>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">GET</span>
                        <span>/projects</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Получить список всех проектов</p>
                        
                        <h4>Пример ответа:</h4>
                        <div class="code-block">
{
  "data": [
    {
      "id": "proj_abc123",
      "name": "Основной проект",
      "description": "Проект для основных автоматизаций",
      "secrets_count": 15,
      "created_at": "2025-01-10T09:00:00Z",
      "updated_at": "2025-01-15T10:30:00Z"
    }
  ]
}
                        </div>
                    </div>
                </div>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">POST</span>
                        <span>/projects</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Создать новый проект</p>
                        
                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X POST "https://api.apisafe.io/v1/projects" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Новый проект",
    "description": "Описание нового проекта"
  }'
                        </div>
                    </div>
                </div>

                <h2>Статистика</h2>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">GET</span>
                        <span>/stats/usage</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Получить статистику использования</p>
                        
                        <div class="api-params">
                            <h4>Query параметры:</h4>
                            <div class="api-param">
                                <div class="api-param-name">
                                    period
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Период: day, week, month (по умолчанию: week)</p>
                            </div>
                            <div class="api-param">
                                <div class="api-param-name">
                                    secret_id
                                    <span class="api-param-type">string</span>
                                </div>
                                <p>Статистика по конкретному секрету (опционально)</p>
                            </div>
                        </div>

                        <h4>Пример ответа:</h4>
                        <div class="code-block">
{
  "period": "week",
  "total_requests": 1250,
  "unique_secrets": 8,
  "top_secrets": [
    {
      "secret_id": "secret_abc123",
      "name": "OpenAI Main Key",
      "requests": 450
    }
  ],
  "daily_breakdown": [
    {
      "date": "2025-01-18",
      "requests": 180
    }
  ]
}
                        </div>
                    </div>
                </div>

                <h2>Webhook'и</h2>

                <p>APISafe поддерживает webhook'и для уведомления о различных событиях:</p>

                <ul>
                    <li><code>secret.created</code> - создан новый секрет</li>
                    <li><code>secret.updated</code> - обновлен секрет</li>
                    <li><code>secret.deleted</code> - удален секрет</li>
                    <li><code>secret.accessed</code> - получен доступ к секрету</li>
                    <li><code>project.created</code> - создан новый проект</li>
                    <li><code>team.member_added</code> - добавлен участник команды</li>
                </ul>

                <div class="api-endpoint">
                    <div class="api-endpoint-header">
                        <span class="api-method">POST</span>
                        <span>/webhooks</span>
                    </div>
                    <div class="api-endpoint-body">
                        <p>Создать новый webhook</p>
                        
                        <h4>Пример запроса:</h4>
                        <div class="code-block">
curl -X POST "https://api.apisafe.io/v1/webhooks" \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-app.com/webhooks/apisafe",
    "events": ["secret.created", "secret.accessed"],
    "active": true
  }'
                        </div>
                    </div>
                </div>

                <h3>Формат webhook события</h3>
                <div class="code-block">
{
  "id": "evt_abc123",
  "type": "secret.accessed",
  "created_at": "2025-01-18T14:22:00Z",
  "data": {
    "secret": {
      "id": "secret_abc123",
      "name": "OpenAI Main Key",
      "type": "openai"
    },
    "user": {
      "id": "user_xyz789",
      "email": "user@example.com"
    },
    "integration": "make.com"
  }
}
                </div>

                <h2>SDK и библиотеки</h2>

                <p>Официальные SDK для популярных языков программирования:</p>

                <div class="feature-grid">
                    <div class="feature-item">
                        <h3><i data-lucide="code"></i> JavaScript/Node.js</h3>
                        <div class="code-block">
npm install @apisafe/sdk
                        </div>
                        <p><a href="#" class="link">Документация</a> | <a href="#" class="link">GitHub</a></p>
                    </div>
                    
                    <div class="feature-item">
                        <h3><i data-lucide="code"></i> Python</h3>
                        <div class="code-block">
pip install apisafe-python
                        </div>
                        <p><a href="#" class="link">Документация</a> | <a href="#" class="link">GitHub</a></p>
                    </div>
                    
                    <div class="feature-item">
                        <h3><i data-lucide="code"></i> Go</h3>
                        <div class="code-block">
go get github.com/apisafe/go-sdk
                        </div>
                        <p><a href="#" class="link">Документация</a> | <a href="#" class="link">GitHub</a></p>
                    </div>
                    
                    <div class="feature-item">
                        <h3><i data-lucide="code"></i> PHP</h3>
                        <div class="code-block">
composer require apisafe/php-sdk
                        </div>
                        <p><a href="#" class="link">Документация</a> | <a href="#" class="link">GitHub</a></p>
                    </div>
                </div>

                <h2>Ошибки</h2>

                <p>API возвращает ошибки в стандартном формате:</p>

                <div class="code-block">
{
  "error": {
    "code": "invalid_request",
    "message": "Параметр 'name' обязателен",
    "details": {
      "field": "name",
      "reason": "missing_required_field"
    }
  }
}
                </div>

                <h3>Коды ошибок</h3>
                <ul>
                    <li><code>invalid_request</code> - Неверный запрос</li>
                    <li><code>authentication_failed</code> - Ошибка аутентификации</li>
                    <li><code>permission_denied</code> - Недостаточно прав</li>
                    <li><code>resource_not_found</code> - Ресурс не найден</li>
                    <li><code>rate_limit_exceeded</code> - Превышен лимит запросов</li>
                    <li><code>internal_error</code> - Внутренняя ошибка сервера</li>
                </ul>

                <div style="text-align: center; margin-top: 3rem;">
                    <a href="documentation.html" class="btn btn-primary btn-large">
                        <i data-lucide="book-open"></i>
                        Полная документация
                    </a>
                    <a href="help.html" class="btn btn-secondary btn-large" style="margin-left: 1rem;">
                        <i data-lucide="help-circle"></i>
                        Получить помощь
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="logo">
                        <i data-lucide="shield-check"></i>
                        <span>ApiSafe</span>
                    </div>
                    <p>Безопасное хранение API-ключей для no-code разработчиков</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Продукт</h4>
                        <a href="features.html">Возможности</a>
                        <a href="index.html#pricing">Цены</a>
                        <a href="documentation.html">Документация</a>
                        <a href="api.html">API</a>
                    </div>
                    <div class="footer-column">
                        <h4>Поддержка</h4>
                        <a href="faq.html">FAQ</a>
                        <a href="help.html">Помощь</a>
                        <a href="contacts.html">Контакты</a>
                    </div>
                    <div class="footer-column">
                        <h4>Компания</h4>
                        <a href="about.html">О нас</a>
                        <a href="#">Блог</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ApiSafe. Все права защищены.</p>
                <div class="footer-legal">
                    <a href="privacy.html">Политика конфиденциальности</a>
                    <a href="terms.html">Условия использования</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
        <i data-lucide="arrow-up"></i>
    </button>

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Mobile menu toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const navMenu = document.querySelector('.nav-menu');
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
        }

        // Scroll to form function
        function scrollToForm() {
            // Проверяем, есть ли форма на текущей странице
            const form = document.querySelector('#signupForm, .signup-form, form[name="signupForm"]');
            
            if (form) {
                // Если форма найдена на текущей странице, прокручиваем к ней
                form.scrollIntoView({ 
                    behavior: 'smooth',
                });
            } else {
                // Если формы нет, перенаправляем на главную страницу с якорем к форме
                if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
                    window.location.href = 'index.html#signupForm';
                } else {
                    // Если мы уже на главной странице, но форма не найдена, попробуем найти её по другим селекторам
                    const fallbackForm = document.querySelector('form, .form-container, #contact-form');
                    if (fallbackForm) {
                        fallbackForm.scrollIntoView({ 
                            behavior: 'smooth',
                        });
                    }
                }
            }
        }

        // Back to top button
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</html>
